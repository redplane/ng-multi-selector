"use strict";angular.module("ngMultiSelector",[]).run(function(e){e.put("ng-multi-selector.html",'<div class="dropdown" ng-init="init()"> <div class="input-group ng-multi-selector"> <div class="dropdown-toggle" aria-haspopup="true" aria-expanded="false" data-toggle="{{ngDisabled ? \'\' : \'dropdown\'}}"> <input class="form-control ng-multi-selector-title-box" readonly="readonly" ng-disabled="ngDisabled" value="{{getTitle()}}"> </div><span ng-if="isClearButtonAvailable" class="input-group-addon" ng-click="clear()"> <span class="glyphicon glyphicon-remove"></span> </span> <span class="input-group-addon dropdown-toggle" aria-haspopup="true" aria-expanded="false" data-toggle="{{ngDisabled ? \'\' : \'dropdown\'}}"> <span class="caret"></span> </span> <ul class="dropdown-menu" ng-click="clickDropDownMenu($event)" ng-if="!ngDisabled"> <li ng-if="isSearchBoxAvailable"> <div class="col-lg-12"> <div class="form-group"> <div class="input-group"> <input class="form-control ng-multi-selector-search-box" placeholder="{{placeholderSearch}}" ng-model="model.keyword" ng-init="initSearchBox()" maxlength="{{maxlength}}"> <span class="input-group-addon"> <span class="glyphicon glyphicon-search"></span> </span> </div></div></div></li><li ng-if="!customItemTemplate" ng-repeat="item in items | limitTo: limitItemAmount" ng-click="selectItem(item)" ng-class="{\'{{getActiveClass()}}\' : getItemSelected(item) !==-1}"> <a href="javascript:void(0);">{{getItemDisplay(item)}}</a> </li><li ng-if="customItemTemplate" ng-repeat="item in items | limitTo: limitItemAmount" ng-click="selectItem(item)" ng-class="{\'{{getActiveClass()}}\': getItemSelected(item) !==-1}" inject> </li></ul> </div></div>')}).directive("ngMultiSelector",function(){return{restrict:"E",templateUrl:function(e,t){return t.templateUrl||"ng-multi-selector.html"},transclude:!0,replace:!1,require:"ngModel",scope:{items:"=?",keyProperty:"=",displayProperty:"=",ngDisabled:"=",placeholderTitle:"=",placeholderSearch:"=",maxlength:"=?",separator:"=",autoClose:"=",limitItemAmount:"=",isClearButtonAvailable:"=",isSearchBoxAvailable:"=",interval:"=",customItemTemplate:"=",activeClass:"=?",ngSearchItems:"&"},link:function(e,t,n,i){e.item&&i.$setViewValue(e.item),e.$watch(function(){return i.$modelValue},function(t){t instanceof Array&&t.length<1?(i.$setViewValue(null),e.chosenItems=null):e.chosenItems=t},!0),e.clear=function(){e.chosenItems=null,i.$setViewValue(null)},e.selectItem=function(t){var n=-1,l=t;return e.chosenItems?n=e.chosenItems.indexOf(l):e.chosenItems=[],-1===n?(e.chosenItems.push(l),void i.$setViewValue(e.chosenItems)):(e.chosenItems.splice(n,1),(!e.chosenItems||e.chosenItems.length<1)&&(e.chosenItems=null),void i.$setViewValue(e.chosenItems))}},controller:function(e,t,n){e.chosenItems=[],e.init=function(){e.instance=this},e.initSearchBox=function(){n(function(){var n=t[0].getElementsByClassName("ng-multi-selector-search-box")[0],i=e.interval;(!i||400>i)&&(i=400),Rx.Observable.fromEvent(n,"keyup").pluck("target","value").map(function(e){return e?e.trim():e}).debounceTime(i).distinctUntilChanged().subscribe(function(t){e.ngSearchItems({keyword:t})})})},e.model={keyword:null,lastModified:0,timeout:null},e.getItemSelected=function(t){if(!e.chosenItems)return-1;if(e.keyProperty){var n=e.chosenItems.filter(function(n){return n[e.keyProperty]===t[e.keyProperty]});return n&&n.length>0?0:-1}return e.chosenItems.indexOf(t)},e.getTitle=function(){var t="";return e.chosenItems&&e.chosenItems.length>0?t=e.chosenItems.map(function(t){return e.displayProperty&&e.displayProperty.length>0?t[e.displayProperty]:t}).join(e.getSeparator()):t},e.getSeparator=function(){return!e.separator||!e.separator.length<1?" - ":e.separator},e.clickDropDownMenu=function(t){t&&(e.autoClose||t.stopPropagation())},e.getItemDisplay=function(t){return!e.displayProperty||e.displayProperty.length<1?t:t[e.displayProperty]},e.getActiveClass=function(){return e.activeClass?e.activeClass:"active"}}}}).directive("inject",function(){return{link:function(e,t,n,i,l){if(!l)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag(t));var s=e.$new();l(s,function(e){t.empty(),t.append(e),t.on("$destroy",function(){s.$destroy()})})}}});